<script type="text/javascript" src="{ROOT}librairies/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
	var path_skin = "../../styles/{STYLE}/";
	var path_smileys = "{PATH_SMILEYS}";
	var largeur_smileys = {LARGEUR_SMILEYS};
	var hauteur_smileys = {HAUTEUR_SMILEYS};
	tinyMCE.init({
		// General options
		<!-- BEGIN load -->
		mode : "textareas",
		<!-- END load -->
		<!-- BEGIN unload -->
		mode : "",
		<!-- END unload -->
		language : "fr",
		plugins : "youtube,preview,dailymotion,safari,pagebreak,advimage,advlink,emotions,iespell,inlinepopups,media,paste,fullscreen,visualchars,nonbreaking,xhtmlxtras",
		font_size_style_values:'8,10,12,14,18,24,36',
		
		// Themes
		theme : "advanced",
		skin : "wysiwyg",
		popup_css : "librairies/tiny_mce/plugins/media/css/media.css",	
		theme_advanced_styles : "php=php;Code=codeStyle;Quote=quoteStyle",
		content_css : "styles/{STYLE}/style.css",
		
		// Rendu
        forced_root_block : false, // false pour eviter les <p></p>
 		force_p_newlines : false, // false pour virer les <p></p>
		force_br_newlines : true, // true pour IE
		remove_linebreaks : true,
		convert_fonts_to_spans:true,
		
		// Boutons supplementaires
		setup : function(ed) {
			// Bouton PHP
			ed.addButton('php', {
				title : '{L_PHP}',
				onclick : function() {tinyMCE.execCommand('mceReplaceContent',false,'<span class="php">{$selection}</span>');}
			});
			// Bouton HTML
			ed.addButton('html', {
				title : '{L_HTML}',
				onclick : function() {tinyMCE.execCommand('mceReplaceContent',false,'<span class="html4strict">{$selection}</span>');}
			});
			// Bouton SQL
			ed.addButton('sql', {
				title : '{L_SQL}',
				onclick : function() {tinyMCE.execCommand('mceReplaceContent',false,'<span class="sql">{$selection}</span>');	}
			});
			// Bouton Wiki
			ed.addButton('wiki', {
				title : '{L_WIKI}',
				onclick : function() {tinyMCE.execCommand('mceReplaceContent',false,'<span class="wiki">{$selection}</span>');}
			});
			// Bouton Citer
			ed.addButton('quote', {
				title : '{L_QUOTE}',
				onclick : function() {tinyMCE.execCommand('mceReplaceContent',false,'<blockquote>{$selection}</blockquote>');}
			});
		}, 
		<!-- BEGIN iphone -->
		theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,preview,code,fullscreen",
		theme_advanced_buttons2 : "formatselect,fontsizeselect,forecolor,backcolor",
		theme_advanced_buttons3 : "youtube,dailymotion,html,php,sql,bullist,numlist,|,quote,|,undo,redo,cleanup,preview",
		theme_advanced_buttons4 : "link,unlink,image,wiki,|,hr,|,sub,sup,|,charmap,emotions,iespell,|,pagebreak",
		theme_advanced_blockformats : "p,h1,h2,h3,pre",
		theme_advanced_toolbar_location : "top",
		theme_advanced_toolbar_align : "left",
		theme_advanced_statusbar_location : "bottom",
		theme_advanced_resizing : true
		<!-- END iphone -->
		<!-- BEGIN avance -->
		theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,formatselect,fontsizeselect,forecolor,backcolor,|,preview,code,fullscreen,",
		theme_advanced_buttons2 : "youtube,dailymotion,html,php,sql,bullist,numlist,|,quote,|,undo,redo,cleanup,preview,|,link,unlink,image,wiki,|,hr,|,sub,sup,|,charmap,emotions,iespell,|,pagebreak",
		theme_advanced_buttons3 : "",
		theme_advanced_buttons4 : "",
		theme_advanced_blockformats : "p,h1,h2,h3,pre",
		theme_advanced_toolbar_location : "top",
		theme_advanced_toolbar_align : "left",
		theme_advanced_statusbar_location : "bottom",
		theme_advanced_resizing : true
		<!-- END avance -->
		<!-- BEGIN simple -->
		theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,link,image,forecolor,emotions",
		theme_advanced_buttons2 : "",
		theme_advanced_buttons3 : "",
		theme_advanced_buttons4 : "",
		theme_advanced_blockformats : "p,h1,h2,h3,pre",
		theme_advanced_toolbar_location : "top",
		theme_advanced_toolbar_align : "left",
		theme_advanced_statusbar_location : false,
		theme_advanced_resizing : false
		<!-- END simple -->
	});
	function toggleEditor(id) {
		var elm = document.getElementById(id);

		if (tinyMCE.getInstanceById(id) == null)
			tinyMCE.execCommand('mceAddControl', false, id);
		else
			tinyMCE.execCommand('mceRemoveControl', false, id);
	}
</script>